<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tastypie.test &mdash; obp 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="obp 0.0.1 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">obp 0.0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for tastypie.test</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urlparse</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">django.test.client</span> <span class="kn">import</span> <span class="n">FakePayload</span><span class="p">,</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">tastypie.serializers</span> <span class="kn">import</span> <span class="n">Serializer</span>


<div class="viewcode-block" id="TestApiClient"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient">[docs]</a><span class="k">class</span> <span class="nc">TestApiClient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up a fresh ``TestApiClient`` instance.</span>

<span class="sd">        If you are employing a custom serializer, you can pass the class to the</span>
<span class="sd">        ``serializer=`` kwarg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span> <span class="o">=</span> <span class="n">serializer</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">()</span>

<div class="viewcode-block" id="TestApiClient.get_content_type"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient.get_content_type">[docs]</a>    <span class="k">def</span> <span class="nf">get_content_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short_format</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a short name (such as ``json`` or ``xml``), returns the full content-type</span>
<span class="sd">        for it (``application/json`` or ``application/xml`` in this case).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">content_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">short_format</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestApiClient.get"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">authentication</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a simulated ``GET`` request to the provided URI.</span>

<span class="sd">        Optionally accepts a ``data`` kwarg, which in the case of ``GET``, lets you</span>
<span class="sd">        send along ``GET`` parameters. This is useful when testing filtering or other</span>
<span class="sd">        things that read off the ``GET`` params. Example::</span>

<span class="sd">            from tastypie.test import TestApiClient</span>
<span class="sd">            client = TestApiClient()</span>

<span class="sd">            response = client.get(&#39;/api/v1/entry/1/&#39;, data={&#39;format&#39;: &#39;json&#39;, &#39;title__startswith&#39;: &#39;a&#39;, &#39;limit&#39;: 20, &#39;offset&#39;: 60})</span>

<span class="sd">        Optionally accepts an ``authentication`` kwarg, which should be an HTTP header</span>
<span class="sd">        with the correct authentication data already setup.</span>

<span class="sd">        All other ``**kwargs`` passed in get passed through to the Django</span>
<span class="sd">        ``TestClient``. See https://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client</span>
<span class="sd">        for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;HTTP_ACCEPT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>

        <span class="c"># GET &amp; DELETE are the only times we don&#39;t serialize the data.</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">if</span> <span class="n">authentication</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">authentication</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestApiClient.post"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">authentication</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a simulated ``POST`` request to the provided URI.</span>

<span class="sd">        Optionally accepts a ``data`` kwarg. **Unlike** ``GET``, in ``POST`` the</span>
<span class="sd">        ``data`` gets serialized &amp; sent as the body instead of becoming part of the URI.</span>
<span class="sd">        Example::</span>

<span class="sd">            from tastypie.test import TestApiClient</span>
<span class="sd">            client = TestApiClient()</span>

<span class="sd">            response = client.post(&#39;/api/v1/entry/&#39;, data={</span>
<span class="sd">                &#39;created&#39;: &#39;2012-05-01T20:02:36&#39;,</span>
<span class="sd">                &#39;slug&#39;: &#39;another-post&#39;,</span>
<span class="sd">                &#39;title&#39;: &#39;Another Post&#39;,</span>
<span class="sd">                &#39;user&#39;: &#39;/api/v1/user/1/&#39;,</span>
<span class="sd">            })</span>

<span class="sd">        Optionally accepts an ``authentication`` kwarg, which should be an HTTP header</span>
<span class="sd">        with the correct authentication data already setup.</span>

<span class="sd">        All other ``**kwargs`` passed in get passed through to the Django</span>
<span class="sd">        ``TestClient``. See https://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client</span>
<span class="sd">        for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;content_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">content_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">authentication</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">authentication</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestApiClient.put"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient.put">[docs]</a>    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">authentication</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a simulated ``PUT`` request to the provided URI.</span>

<span class="sd">        Optionally accepts a ``data`` kwarg. **Unlike** ``GET``, in ``PUT`` the</span>
<span class="sd">        ``data`` gets serialized &amp; sent as the body instead of becoming part of the URI.</span>
<span class="sd">        Example::</span>

<span class="sd">            from tastypie.test import TestApiClient</span>
<span class="sd">            client = TestApiClient()</span>

<span class="sd">            response = client.put(&#39;/api/v1/entry/1/&#39;, data={</span>
<span class="sd">                &#39;created&#39;: &#39;2012-05-01T20:02:36&#39;,</span>
<span class="sd">                &#39;slug&#39;: &#39;another-post&#39;,</span>
<span class="sd">                &#39;title&#39;: &#39;Another Post&#39;,</span>
<span class="sd">                &#39;user&#39;: &#39;/api/v1/user/1/&#39;,</span>
<span class="sd">            })</span>

<span class="sd">        Optionally accepts an ``authentication`` kwarg, which should be an HTTP header</span>
<span class="sd">        with the correct authentication data already setup.</span>

<span class="sd">        All other ``**kwargs`` passed in get passed through to the Django</span>
<span class="sd">        ``TestClient``. See https://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client</span>
<span class="sd">        for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;content_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">content_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">authentication</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">authentication</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestApiClient.patch"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient.patch">[docs]</a>    <span class="k">def</span> <span class="nf">patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">authentication</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a simulated ``PATCH`` request to the provided URI.</span>

<span class="sd">        Optionally accepts a ``data`` kwarg. **Unlike** ``GET``, in ``PATCH`` the</span>
<span class="sd">        ``data`` gets serialized &amp; sent as the body instead of becoming part of the URI.</span>
<span class="sd">        Example::</span>

<span class="sd">            from tastypie.test import TestApiClient</span>
<span class="sd">            client = TestApiClient()</span>

<span class="sd">            response = client.patch(&#39;/api/v1/entry/1/&#39;, data={</span>
<span class="sd">                &#39;created&#39;: &#39;2012-05-01T20:02:36&#39;,</span>
<span class="sd">                &#39;slug&#39;: &#39;another-post&#39;,</span>
<span class="sd">                &#39;title&#39;: &#39;Another Post&#39;,</span>
<span class="sd">                &#39;user&#39;: &#39;/api/v1/user/1/&#39;,</span>
<span class="sd">            })</span>

<span class="sd">        Optionally accepts an ``authentication`` kwarg, which should be an HTTP header</span>
<span class="sd">        with the correct authentication data already setup.</span>

<span class="sd">        All other ``**kwargs`` passed in get passed through to the Django</span>
<span class="sd">        ``TestClient``. See https://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client</span>
<span class="sd">        for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;content_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">content_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">authentication</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">authentication</span>

        <span class="c"># This hurts because Django doesn&#39;t support PATCH natively.</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;CONTENT_LENGTH&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]),</span>
            <span class="s">&#39;CONTENT_TYPE&#39;</span><span class="p">:</span> <span class="n">content_type</span><span class="p">,</span>
            <span class="s">&#39;PATH_INFO&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">_get_path</span><span class="p">(</span><span class="n">parsed</span><span class="p">),</span>
            <span class="s">&#39;QUERY_STRING&#39;</span><span class="p">:</span> <span class="n">parsed</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
            <span class="s">&#39;REQUEST_METHOD&#39;</span><span class="p">:</span> <span class="s">&#39;PATCH&#39;</span><span class="p">,</span>
            <span class="s">&#39;wsgi.input&#39;</span><span class="p">:</span> <span class="n">FakePayload</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]),</span>
        <span class="p">}</span>
        <span class="n">r</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="o">**</span><span class="n">r</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TestApiClient.delete"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.TestApiClient.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">authentication</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a simulated ``DELETE`` request to the provided URI.</span>

<span class="sd">        Optionally accepts a ``data`` kwarg, which in the case of ``DELETE``, lets you</span>
<span class="sd">        send along ``DELETE`` parameters. This is useful when testing filtering or other</span>
<span class="sd">        things that read off the ``DELETE`` params. Example::</span>

<span class="sd">            from tastypie.test import TestApiClient</span>
<span class="sd">            client = TestApiClient()</span>

<span class="sd">            response = client.delete(&#39;/api/v1/entry/1/&#39;, data={&#39;format&#39;: &#39;json&#39;})</span>

<span class="sd">        Optionally accepts an ``authentication`` kwarg, which should be an HTTP header</span>
<span class="sd">        with the correct authentication data already setup.</span>

<span class="sd">        All other ``**kwargs`` passed in get passed through to the Django</span>
<span class="sd">        ``TestClient``. See https://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client</span>
<span class="sd">        for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;content_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>

        <span class="c"># GET &amp; DELETE are the only times we don&#39;t serialize the data.</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">if</span> <span class="n">authentication</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;HTTP_AUTHORIZATION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">authentication</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="ResourceTestCase"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase">[docs]</a><span class="k">class</span> <span class="nc">ResourceTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A useful base class for the start of testing Tastypie APIs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="ResourceTestCase.setUp"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.setUp">[docs]</a>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ResourceTestCase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_client</span> <span class="o">=</span> <span class="n">TestApiClient</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.get_credentials"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.get_credentials">[docs]</a>    <span class="k">def</span> <span class="nf">get_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A convenience method for the user as a way to shorten up the</span>
<span class="sd">        often repetitious calls to create the same authentication.</span>

<span class="sd">        Raises ``NotImplementedError`` by default.</span>

<span class="sd">        Usage::</span>

<span class="sd">            class MyResourceTestCase(ResourceTestCase):</span>
<span class="sd">                def get_credentials(self):</span>
<span class="sd">                    return self.create_basic(&#39;daniel&#39;, &#39;pass&#39;)</span>

<span class="sd">                # Then the usual tests...</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;You must return the class for your Resource to test.&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.create_basic"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.create_basic">[docs]</a>    <span class="k">def</span> <span class="nf">create_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates &amp; returns the HTTP ``Authorization`` header for use with BASIC</span>
<span class="sd">        Auth.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">base64</span>
        <span class="k">return</span> <span class="s">&#39;Basic </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">]))</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.create_apikey"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.create_apikey">[docs]</a>    <span class="k">def</span> <span class="nf">create_apikey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">api_key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates &amp; returns the HTTP ``Authorization`` header for use with</span>
<span class="sd">        ``ApiKeyAuthentication``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&#39;ApiKey </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">api_key</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.create_digest"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.create_digest">[docs]</a>    <span class="k">def</span> <span class="nf">create_digest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates &amp; returns the HTTP ``Authorization`` header for use with Digest</span>
<span class="sd">        Auth.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">tastypie.authentication</span> <span class="kn">import</span> <span class="n">hmac</span><span class="p">,</span> <span class="n">sha1</span><span class="p">,</span> <span class="n">uuid</span><span class="p">,</span> <span class="n">python_digest</span>

        <span class="n">new_uuid</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
        <span class="n">opaque</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">new_uuid</span><span class="p">),</span> <span class="n">digestmod</span><span class="o">=</span><span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">python_digest</span><span class="o">.</span><span class="n">build_authorization_request</span><span class="p">(</span>
            <span class="n">username</span><span class="p">,</span>
            <span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span> <span class="c"># nonce_count</span>
            <span class="n">digest_challenge</span><span class="o">=</span><span class="n">python_digest</span><span class="o">.</span><span class="n">build_digest_challenge</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s">&#39;SECRET_KEY&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;django-tastypie&#39;</span><span class="p">,</span> <span class="n">opaque</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
            <span class="n">password</span><span class="o">=</span><span class="n">api_key</span>
        <span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.create_oauth"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.create_oauth">[docs]</a>    <span class="k">def</span> <span class="nf">create_oauth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates &amp; returns the HTTP ``Authorization`` header for use with Oauth.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">oauth_provider.models</span> <span class="kn">import</span> <span class="n">Consumer</span><span class="p">,</span> <span class="n">Token</span><span class="p">,</span> <span class="n">Resource</span>

        <span class="c"># Necessary setup for ``oauth_provider``.</span>
        <span class="n">resource</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Resource</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="p">{</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Test Resource&#39;</span>
        <span class="p">})</span>
        <span class="n">consumer</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Consumer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="p">{</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Test&#39;</span><span class="p">,</span>
            <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="s">&#39;Testing...&#39;</span>
        <span class="p">})</span>
        <span class="n">token</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Token</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">token_type</span><span class="o">=</span><span class="n">Token</span><span class="o">.</span><span class="n">ACCESS</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="p">{</span>
            <span class="s">&#39;consumer&#39;</span><span class="p">:</span> <span class="n">consumer</span><span class="p">,</span>
            <span class="s">&#39;resource&#39;</span><span class="p">:</span> <span class="n">resource</span><span class="p">,</span>
            <span class="s">&#39;secret&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
        <span class="p">})</span>

        <span class="c"># Then generate the header.</span>
        <span class="n">oauth_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;oauth_consumer_key&#39;</span><span class="p">:</span> <span class="s">&#39;123&#39;</span><span class="p">,</span>
            <span class="s">&#39;oauth_nonce&#39;</span><span class="p">:</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span>
            <span class="s">&#39;oauth_signature&#39;</span><span class="p">:</span> <span class="s">&#39;&amp;&#39;</span><span class="p">,</span>
            <span class="s">&#39;oauth_signature_method&#39;</span><span class="p">:</span> <span class="s">&#39;PLAINTEXT&#39;</span><span class="p">,</span>
            <span class="s">&#39;oauth_timestamp&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())),</span>
            <span class="s">&#39;oauth_token&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s">&#39;OAuth </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">key</span><span class="o">+</span><span class="s">&#39;=&#39;</span><span class="o">+</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">oauth_data</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpOK"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpOK">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpOK</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 200.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpCreated"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpCreated">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpCreated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 201.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpAccepted"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpAccepted">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpAccepted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning either a HTTP 202 or a HTTP 204.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">202</span><span class="p">,</span> <span class="mi">204</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpMultipleChoices"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpMultipleChoices">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpMultipleChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 300.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpSeeOther"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpSeeOther">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpSeeOther</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 303.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">303</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpNotModified"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpNotModified">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpNotModified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 304.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">304</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpBadRequest"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpBadRequest">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpBadRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 400.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpUnauthorized"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpUnauthorized">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpUnauthorized</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 401.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">401</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpForbidden"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpForbidden">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpForbidden</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 403.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">403</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpNotFound"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpNotFound">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpNotFound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 404.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpMethodNotAllowed"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpMethodNotAllowed">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpMethodNotAllowed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 405.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">405</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpConflict"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpConflict">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpConflict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 409.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">409</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpGone"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpGone">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpGone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 410.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">410</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpTooManyRequests"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpTooManyRequests">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpTooManyRequests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 429.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">429</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpApplicationError"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpApplicationError">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpApplicationError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 500.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertHttpNotImplemented"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertHttpNotImplemented">[docs]</a>    <span class="k">def</span> <span class="nf">assertHttpNotImplemented</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the response is returning a HTTP 501.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">501</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidJSON"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidJSON">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidJSON</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the provided ``data`` as a string, ensures that it is valid JSON &amp;</span>
<span class="sd">        can be loaded properly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Just try the load. If it throws an exception, the test case will fail.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidXML"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidXML">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidXML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the provided ``data`` as a string, ensures that it is valid XML &amp;</span>
<span class="sd">        can be loaded properly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Just try the load. If it throws an exception, the test case will fail.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">from_xml</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidYAML"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidYAML">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidYAML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the provided ``data`` as a string, ensures that it is valid YAML &amp;</span>
<span class="sd">        can be loaded properly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Just try the load. If it throws an exception, the test case will fail.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidPlist"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidPlist">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidPlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the provided ``data`` as a string, ensures that it is valid</span>
<span class="sd">        binary plist &amp; can be loaded properly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Just try the load. If it throws an exception, the test case will fail.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">from_plist</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidJSONResponse"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidJSONResponse">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidJSONResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a ``HttpResponse`` coming back from using the ``client``, assert that</span>
<span class="sd">        you get back:</span>

<span class="sd">        * An HTTP 200</span>
<span class="sd">        * The correct content-type (``application/json``)</span>
<span class="sd">        * The content is valid JSON</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHttpOK</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;application/json&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValidJSON</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidXMLResponse"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidXMLResponse">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidXMLResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a ``HttpResponse`` coming back from using the ``client``, assert that</span>
<span class="sd">        you get back:</span>

<span class="sd">        * An HTTP 200</span>
<span class="sd">        * The correct content-type (``application/xml``)</span>
<span class="sd">        * The content is valid XML</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHttpOK</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;application/xml&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValidXML</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidYAMLResponse"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidYAMLResponse">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidYAMLResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a ``HttpResponse`` coming back from using the ``client``, assert that</span>
<span class="sd">        you get back:</span>

<span class="sd">        * An HTTP 200</span>
<span class="sd">        * The correct content-type (``text/yaml``)</span>
<span class="sd">        * The content is valid YAML</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHttpOK</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;text/yaml&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValidYAML</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertValidPlistResponse"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertValidPlistResponse">[docs]</a>    <span class="k">def</span> <span class="nf">assertValidPlistResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a ``HttpResponse`` coming back from using the ``client``, assert that</span>
<span class="sd">        you get back:</span>

<span class="sd">        * An HTTP 200</span>
<span class="sd">        * The correct content-type (``application/x-plist``)</span>
<span class="sd">        * The content is valid binary plist data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHttpOK</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;application/x-plist&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertValidPlist</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.deserialize"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.deserialize">[docs]</a>    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a ``HttpResponse`` coming back from using the ``client``, this method</span>
<span class="sd">        checks the ``Content-Type`` header &amp; attempts to deserialize the data based on</span>
<span class="sd">        that.</span>

<span class="sd">        It returns a Python datastructure (typically a ``dict``) of the serialized data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">resp</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.serialize"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;application/json&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a Python datastructure (typically a ``dict``) &amp; a desired content-type,</span>
<span class="sd">        this method will return a serialized string of that data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">format</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResourceTestCase.assertKeys"><a class="viewcode-back" href="../../auto_modules.html#tastypie.test.ResourceTestCase.assertKeys">[docs]</a>    <span class="k">def</span> <span class="nf">assertKeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method ensures that the keys of the ``data`` match up to the keys of</span>
<span class="sd">        ``expected``.</span>

<span class="sd">        It covers the (extremely) common case where you want to make sure the keys of</span>
<span class="sd">        a response match up to what is expected. This is typically less fragile than</span>
<span class="sd">        testing the full structure, which can be prone to data changes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">expected</span><span class="p">))</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">obp 0.0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, jonas ohrstrom.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>